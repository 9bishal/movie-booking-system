{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ title }} | MovieBooking Admin{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">
        <img src="{% static 'admin/img/logo.png' %}" height="40px" class="me-2">
        ðŸŽ¬ MovieBooking Admin
    </a>
</h1>
{% endblock %}

{% block extrastyle %}
<style>
    :root {
        --primary: #4f46e5;
        --secondary: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --dark: #1f2937;
    }
    
    #header {
        background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
        color: white;
    }
    
    #branding h1 {
        color: white;
        font-weight: 600;
    }
    
    .module h2, .module caption, .inline-group h2 {
        background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
    }
    
    .button, input[type=submit], input[type=button], .submit-row input, a.button {
        background: var(--primary);
        border-radius: 8px;
        transition: all 0.3s;
    }
    
    .button:hover, input[type=submit]:hover, input[type=button]:hover {
        background: #4338ca;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
    }
    
    .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .stat-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        border: 1px solid #e5e7eb;
        transition: transform 0.3s;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
    
    .stat-value {
        font-size: 2rem;
        font-weight: 700;
        margin: 10px 0;
    }
    
    .stat-growth {
        display: inline-flex;
        align-items: center;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
    }
    
    .growth-up {
        background: #d1fae5;
        color: #065f46;
    }
    
    .growth-down {
        background: #fee2e2;
        color: #991b1b;
    }
    
    .chart-container {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }
    
    .action-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background: white;
        border-radius: 12px;
        text-decoration: none;
        color: var(--dark);
        border: 2px solid #e5e7eb;
        transition: all 0.3s;
    }
    
    .action-btn:hover {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        transform: scale(1.05);
    }
    
    .action-btn i {
        font-size: 2rem;
        margin-bottom: 10px;
    }
</style>
{% endblock %}

{% block nav-global %}
{% if admin_stats %}
<div class="dashboard-stats">
    <div class="stat-card">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <small class="text-muted">TODAY'S REVENUE</small>
                <div class="stat-value text-success">â‚¹{{ admin_stats.revenue_today|default:0 }}</div>
            </div>
            {% if admin_stats.revenue_growth > 0 %}
            <span class="stat-growth growth-up">
                <i class="fas fa-arrow-up me-1"></i>{{ admin_stats.revenue_growth }}%
            </span>
            {% elif admin_stats.revenue_growth < 0 %}
            <span class="stat-growth growth-down">
                <i class="fas fa-arrow-down me-1"></i>{{ admin_stats.revenue_growth|slice:"1:" }}%
            </span>
            {% endif %}
        </div>
        <div class="text-muted small">Yesterday: â‚¹{{ admin_stats.revenue_yesterday|default:0 }}</div>
    </div>
    
    <div class="stat-card">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <small class="text-muted">TODAY'S BOOKINGS</small>
                <div class="stat-value text-primary">{{ admin_stats.total_bookings_today }}</div>
            </div>
            {% if admin_stats.booking_growth > 0 %}
            <span class="stat-growth growth-up">
                <i class="fas fa-arrow-up me-1"></i>{{ admin_stats.booking_growth }}%
            </span>
            {% elif admin_stats.booking_growth < 0 %}
            <span class="stat-growth growth-down">
                <i class="fas fa-arrow-down me-1"></i>{{ admin_stats.booking_growth|slice:"1:" }}%
            </span>
            {% endif %}
        </div>
        <div class="text-muted small">Yesterday: {{ admin_stats.total_bookings_yesterday }}</div>
    </div>
    
    <div class="stat-card">
        <small class="text-muted">ACTIVE USERS</small>
        <div class="stat-value text-warning">{{ admin_stats.total_users }}</div>
        <div class="text-muted small">{{ admin_stats.new_users_today }} new today</div>
    </div>
    
    <div class="stat-card">
        <small class="text-muted">ACTIVE SHOWTIMES</small>
        <div class="stat-value text-info">{{ admin_stats.active_showtimes }}</div>
        <div class="text-muted small">{{ admin_stats.total_movies }} movies</div>
    </div>
</div>

<div class="quick-actions">
    <a href="/admin/movies/movie/add/" class="action-btn">
        <i class="fas fa-plus-circle"></i>
        <span>Add Movie</span>
    </a>
    <a href="/admin/movies/showtime/add/" class="action-btn">
        <i class="fas fa-clock"></i>
        <span>Add Showtime</span>
    </a>
    <a href="/admin/bookings/booking/" class="action-btn">
        <i class="fas fa-ticket-alt"></i>
        <span>View Bookings</span>
    </a>
    <a href="/admin/dashboard/analytics/" class="action-btn">
        <i class="fas fa-chart-bar"></i>
        <span>Analytics</span>
    </a>
    <a href="/admin/dashboard/reports/" class="action-btn">
        <i class="fas fa-file-export"></i>
        <span>Export Reports</span>
    </a>
</div>
{% endif %}
{% endblock %}