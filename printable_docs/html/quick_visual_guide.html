<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Visual Guide - Movie Booking System</title>
    <style>
        /* Screen Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.8;
            color: #000;
            background: #f5f5f5;
            padding: 20px;
            font-size: 12pt;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        .header {
            border-bottom: 3px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #007bff;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        
        .meta {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .meta-info {
            color: #666;
            font-size: 0.9em;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .content {
            margin-top: 30px;
        }
        
        h1, h2, h3, h4, h5, h6 {
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            color: #2c3e50;
        }
        
        h1 { font-size: 2em; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        h2 { font-size: 1.75em; border-bottom: 1px solid #dee2e6; padding-bottom: 8px; }
        h3 { font-size: 1.5em; }
        h4 { font-size: 1.25em; }
        
        p {
            margin-bottom: 1em;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 10pt;
            color: #000;
            font-weight: 500;
        }
        
        pre {
            background: #f8f8f8;
            color: #000;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-x: auto;
            margin: 15px 0;
            line-height: 1.6;
            font-size: 10pt;
        }
        
        pre code {
            background: none;
            color: #000;
            padding: 0;
            border: none;
            font-size: 10pt;
            font-weight: normal;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table th, table td {
            padding: 12px;
            text-align: left;
            border: 1px solid #dee2e6;
        }
        
        table th {
            background: #007bff;
            color: white;
            font-weight: 600;
        }
        
        table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        blockquote {
            border-left: 4px solid #007bff;
            padding-left: 20px;
            margin: 20px 0;
            color: #666;
            font-style: italic;
        }
        
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 5px 0;
        }
        
        a {
            color: #007bff;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        hr {
            border: none;
            border-top: 2px solid #dee2e6;
            margin: 30px 0;
        }
        
        /* Print Styles - Optimized for Black & White */
        @media print {
            @page {
                margin: 0.75in;
                size: A4;
            }
            
            body {
                background: white;
                padding: 0;
                color: #000;
                font-size: 11pt;
                line-height: 1.6;
            }
            
            .container {
                box-shadow: none;
                padding: 0;
                max-width: 100%;
            }
            
            .actions, .no-print {
                display: none !important;
            }
            
            .header {
                border-bottom: 2px solid #000;
                padding-bottom: 10pt;
                margin-bottom: 15pt;
            }
            
            .header h1 {
                color: #000;
                font-size: 18pt;
            }
            
            .header p {
                color: #333;
                font-size: 11pt;
            }
            
            .meta {
                background: #f9f9f9;
                border: 1px solid #ddd;
                padding: 10pt;
                margin-bottom: 15pt;
            }
            
            h1 {
                font-size: 16pt;
                border-bottom: 2px solid #000;
                padding-bottom: 5pt;
                margin-top: 20pt;
                margin-bottom: 10pt;
                page-break-after: avoid;
            }
            
            h2 {
                font-size: 14pt;
                border-bottom: 1px solid #666;
                padding-bottom: 4pt;
                margin-top: 15pt;
                margin-bottom: 8pt;
                page-break-after: avoid;
            }
            
            h3 {
                font-size: 13pt;
                margin-top: 12pt;
                margin-bottom: 6pt;
                page-break-after: avoid;
            }
            
            h4 {
                font-size: 12pt;
                margin-top: 10pt;
                margin-bottom: 5pt;
                page-break-after: avoid;
            }
            
            p {
                margin-bottom: 8pt;
                orphans: 3;
                widows: 3;
            }
            
            /* Code blocks - BLACK & WHITE optimized */
            code {
                background: #f0f0f0;
                border: 1px solid #999;
                padding: 2pt 4pt;
                font-family: 'Courier New', 'Consolas', monospace;
                font-size: 9pt;
                color: #000;
                font-weight: 600;
            }
            
            pre {
                background: #f8f8f8;
                border: 2px solid #666;
                padding: 10pt;
                margin: 10pt 0;
                page-break-inside: avoid;
                font-size: 9pt;
                line-height: 1.4;
                overflow: visible;
                white-space: pre-wrap;
                word-wrap: break-word;
            }
            
            pre code {
                background: none;
                border: none;
                padding: 0;
                font-size: 9pt;
                font-weight: normal;
                color: #000;
            }
            
            /* Tables - BLACK & WHITE optimized */
            table {
                page-break-inside: avoid;
                border-collapse: collapse;
                width: 100%;
                margin: 10pt 0;
                border: 2px solid #000;
            }
            
            table th {
                background: #e0e0e0;
                color: #000;
                border: 1px solid #666;
                padding: 6pt;
                font-weight: bold;
                text-align: left;
            }
            
            table td {
                border: 1px solid #999;
                padding: 6pt;
                color: #000;
            }
            
            table tr:nth-child(even) {
                background: #f5f5f5;
            }
            
            /* Blockquotes */
            blockquote {
                border-left: 3px solid #000;
                padding-left: 10pt;
                margin: 10pt 0;
                font-style: italic;
                color: #333;
                page-break-inside: avoid;
            }
            
            /* Links */
            a {
                color: #000;
                text-decoration: underline;
            }
            
            a[href]:after {
                content: " (" attr(href) ")";
                font-size: 9pt;
                color: #666;
            }
            
            /* Lists */
            ul, ol {
                margin: 8pt 0;
                padding-left: 20pt;
            }
            
            li {
                margin: 4pt 0;
            }
            
            /* Horizontal rules */
            hr {
                border: none;
                border-top: 1px solid #000;
                margin: 15pt 0;
            }
            
            /* Image handling */
            img {
                max-width: 100%;
                page-break-inside: avoid;
            }
            
            /* Page breaks */
            .page-break {
                page-break-before: always;
            }
            
            /* Ensure visibility of all content */
            * {
                color: #000 !important;
                background: white !important;
            }
            
            code, pre {
                background: #f5f5f5 !important;
                border-color: #666 !important;
            }
            
            table th {
                background: #e0e0e0 !important;
            }
            
            table tr:nth-child(even) {
                background: #f8f8f8 !important;
            }
        }
        
        /* Code syntax highlighting */
        .codehilite .hll { background-color: #49483e }
        .codehilite .c { color: #75715e }
        .codehilite .k { color: #66d9ef }
        .codehilite .l { color: #ae81ff }
        .codehilite .n { color: #f8f8f2 }
        .codehilite .o { color: #f92672 }
        .codehilite .p { color: #f8f8f2 }
        .codehilite .cm { color: #75715e }
        .codehilite .cp { color: #75715e }
        .codehilite .c1 { color: #75715e }
        .codehilite .cs { color: #75715e }
        .codehilite .kc { color: #66d9ef }
        .codehilite .kd { color: #66d9ef }
        .codehilite .kn { color: #f92672 }
        .codehilite .kp { color: #66d9ef }
        .codehilite .kr { color: #66d9ef }
        .codehilite .kt { color: #66d9ef }
        .codehilite .ld { color: #e6db74 }
        .codehilite .m { color: #ae81ff }
        .codehilite .s { color: #e6db74 }
        .codehilite .na { color: #a6e22e }
        .codehilite .nb { color: #f8f8f2 }
        .codehilite .nc { color: #a6e22e }
        .codehilite .no { color: #66d9ef }
        .codehilite .nd { color: #a6e22e }
        .codehilite .ni { color: #f8f8f2 }
        .codehilite .ne { color: #a6e22e }
        .codehilite .nf { color: #a6e22e }
        .codehilite .nl { color: #f8f8f2 }
        .codehilite .nn { color: #f8f8f2 }
        .codehilite .nx { color: #a6e22e }
        .codehilite .py { color: #f8f8f2 }
        .codehilite .nt { color: #f92672 }
        .codehilite .nv { color: #f8f8f2 }
        .codehilite .ow { color: #f92672 }
        .codehilite .w { color: #f8f8f2 }
        .codehilite .mf { color: #ae81ff }
        .codehilite .mh { color: #ae81ff }
        .codehilite .mi { color: #ae81ff }
        .codehilite .mo { color: #ae81ff }
        .codehilite .sb { color: #e6db74 }
        .codehilite .sc { color: #e6db74 }
        .codehilite .sd { color: #e6db74 }
        .codehilite .s2 { color: #e6db74 }
        .codehilite .se { color: #ae81ff }
        .codehilite .sh { color: #e6db74 }
        .codehilite .si { color: #e6db74 }
        .codehilite .sx { color: #e6db74 }
        .codehilite .sr { color: #e6db74 }
        .codehilite .s1 { color: #e6db74 }
        .codehilite .ss { color: #e6db74 }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Quick Visual Guide</h1>
            <p>Visual guide to the project structure and features</p>
        </div>
        
        <div class="meta">
            <div class="meta-info">
                <strong>Generated:</strong> January 04, 2026<br>
                <strong>Source:</strong> QUICK_VISUAL_GUIDE.md<br>
                <strong>Project:</strong> Movie Booking System
            </div>
            <div class="actions no-print">
                <button class="btn btn-primary" onclick="window.print()">
                    <span>ğŸ–¨ï¸</span> Print / Save as PDF
                </button>
                <button class="btn btn-success" onclick="downloadMarkdown()">
                    <span>ğŸ“¥</span> Download Markdown
                </button>
                <a href="index.html" class="btn btn-secondary">
                    <span>ğŸ </span> Back to Index
                </a>
            </div>
        </div>
        
        <div class="content">
            <h1 id="quick-visual-guide-movie-booking-system">ğŸ¯ Quick Visual Guide - Movie Booking System</h1>
<p>A visual reference guide for understanding the system at a glance.</p>
<hr />
<h2 id="system-components">ğŸ—ï¸ System Components</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸŒ USER'S BROWSER                    â”‚
â”‚  â€¢ Select seats                                         â”‚
â”‚  â€¢ Make payment                                         â”‚
â”‚  â€¢ See confirmation                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP Requests
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ğŸ¯ DJANGO WEB SERVER                      â”‚
â”‚  â€¢ Handle requests                                      â”‚
â”‚  â€¢ Business logic                                       â”‚
â”‚  â€¢ Coordinate components                                â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚              â”‚              â”‚
   â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—„ï¸ REDIS   â”‚ â”‚ ğŸ’¾ DATABASEâ”‚ â”‚ ğŸ’³ RAZORPAY  â”‚
â”‚ Temp cache â”‚ â”‚ Permanent  â”‚ â”‚ Payments     â”‚
â”‚ 10 min TTL â”‚ â”‚ storage    â”‚ â”‚ gateway      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      âš™ï¸ CELERY WORKERS         â”‚
â”‚  â€¢ Send emails                 â”‚
â”‚  â€¢ Background tasks            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â° CELERY BEAT             â”‚
â”‚  â€¢ Expire bookings (60s)       â”‚
â”‚  â€¢ Send reminders (daily)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="booking-state-transitions">ğŸ“Š Booking State Transitions</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Select Seats    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  START   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ PENDING  â”‚
â”‚          â”‚                     â”‚ (10 min) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚                 â”‚
              User Completes    User Abandons    Timer Expires
                Payment           Payment         or Refresh
                    â”‚                 â”‚                 â”‚
                    â–¼                 â–¼                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ CONFIRMED â”‚     â”‚ CANCELLEDâ”‚    â”‚ EXPIRED  â”‚
              â”‚ (Permanent)â”‚     â”‚          â”‚    â”‚          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="complete-booking-flow">ğŸ”„ Complete Booking Flow</h2>
<pre><code>1ï¸âƒ£ USER SELECTS SEATS
    â†“
2ï¸âƒ£ DJANGO â†’ REDIS (Lock seats, 10-min TTL)
    â†“
3ï¸âƒ£ DJANGO â†’ DATABASE (Create PENDING booking)
    â†“
4ï¸âƒ£ USER SEES PAYMENT PAGE
    â†“
5ï¸âƒ£ DJANGO â†’ RAZORPAY (Create order)
    â†“
6ï¸âƒ£ RAZORPAY MODAL OPENS
    â†“
7ï¸âƒ£ USER ENTERS CARD &amp; PAYS
    â†“
8ï¸âƒ£ RAZORPAY PROCESSES PAYMENT
    â†“
9ï¸âƒ£ DJANGO VERIFIES SIGNATURE âœ…
    â†“
ğŸ”Ÿ DJANGO â†’ DATABASE (Update to CONFIRMED)
    â†“
1ï¸âƒ£1ï¸âƒ£ DJANGO â†’ REDIS (Clear locks)
    â†“
1ï¸âƒ£2ï¸âƒ£ DJANGO â†’ CELERY (Queue email)
    â†“
1ï¸âƒ£3ï¸âƒ£ CELERY SENDS EMAIL
    â†“
1ï¸âƒ£4ï¸âƒ£ USER SEES SUCCESS PAGE! ğŸ‰
</code></pre>
<hr />
<h2 id="timeline-visualization">â° Timeline Visualization</h2>
<pre><code>Time    | User Action           | System Response
--------|-----------------------|------------------------------------
6:00 PM | Select seats A1, A2   | Redis: Lock A1, A2 (expires 6:10)
        |                       | DB: Create booking (PENDING)
--------|-----------------------|------------------------------------
6:02 PM | Click &quot;Pay Now&quot;       | Razorpay: Create order
        |                       | Show payment modal
--------|-----------------------|------------------------------------
6:05 PM | Enter card, pay       | Razorpay: Process payment
        |                       | Django: Verify signature âœ…
        |                       | DB: Update to CONFIRMED
        |                       | Redis: Clear locks
        |                       | Celery: Queue email
--------|-----------------------|------------------------------------
6:05 PM | See success page      | User happy! âœ…
--------|-----------------------|------------------------------------
6:07 PM | -                     | Celery: Send email âœ…
--------|-----------------------|------------------------------------

ALTERNATIVE TIMELINE (User Abandons):

Time    | User Action           | System Response
--------|-----------------------|------------------------------------
6:00 PM | Select seats          | Redis: Lock seats (expires 6:10)
        |                       | DB: Create booking (PENDING)
--------|-----------------------|------------------------------------
6:05 PM | Close browser âŒ       | (No action)
--------|-----------------------|------------------------------------
6:10 PM | -                     | Redis: Auto-delete locks (TTL=0)
--------|-----------------------|------------------------------------
6:11 PM | -                     | Celery Beat: Find expired booking
        |                       | DB: Update to EXPIRED
        |                       | Redis: Cleanup (if any remaining)
--------|-----------------------|------------------------------------
Result  | Seats A1, A2 now available for others! âœ…
</code></pre>
<hr />
<h2 id="redis-keys-structure">ğŸ—„ï¸ Redis Keys Structure</h2>
<pre><code>For Showtime ID: 24, User ID: 7, Seats: A1, A2

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: seat_lock:24:A1                           â”‚
â”‚ Value: &quot;7&quot; (user_id)                           â”‚
â”‚ TTL: 600 seconds (10 minutes)                  â”‚
â”‚ Purpose: Lock individual seat A1               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: seat_lock:24:A2                           â”‚
â”‚ Value: &quot;7&quot; (user_id)                           â”‚
â”‚ TTL: 600 seconds                               â”‚
â”‚ Purpose: Lock individual seat A2               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: reserved_seats_24                         â”‚
â”‚ Value: [&quot;A1&quot;, &quot;A2&quot;]                            â”‚
â”‚ TTL: 600 seconds                               â”‚
â”‚ Purpose: List of all reserved seats            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: seat_reservation_24_7                     â”‚
â”‚ Value: {                                       â”‚
â”‚   &quot;seat_ids&quot;: [&quot;A1&quot;, &quot;A2&quot;],                    â”‚
â”‚   &quot;reserved_at&quot;: 1767451157.5                  â”‚
â”‚ }                                              â”‚
â”‚ TTL: 600 seconds                               â”‚
â”‚ Purpose: User's specific reservation           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="decision-tree-what-component-to-use">ğŸ’¡ Decision Tree: What Component to Use?</h2>
<pre><code>Need to...

â”œâ”€ Store data temporarily (&lt; 1 hour)?
â”‚  â””â”€â†’ USE: Redis âœ…
â”‚      Examples: Seat locks, session data
â”‚
â”œâ”€ Store data permanently?
â”‚  â””â”€â†’ USE: Database âœ…
â”‚      Examples: Users, bookings, movies
â”‚
â”œâ”€ Process payment?
â”‚  â””â”€â†’ USE: Razorpay âœ…
â”‚      Example: Credit card payments
â”‚
â”œâ”€ Send email/SMS?
â”‚  â””â”€â†’ USE: Celery (async) âœ…
â”‚      Why: Don't make user wait
â”‚
â”œâ”€ Run task on schedule?
â”‚  â””â”€â†’ USE: Celery Beat âœ…
â”‚      Example: Expire bookings every 60s
â”‚
â””â”€ Handle user request?
   â””â”€â†’ USE: Django âœ…
       Example: All HTTP requests
</code></pre>
<hr />
<h2 id="error-handling-flow">ğŸš¨ Error Handling Flow</h2>
<pre><code>SCENARIO: User Refreshes Payment Page

1. Frontend JS detects refresh
   â†“
2. sessionStorage check
   â”œâ”€â†’ New tab? â†’ Show error page âœ…
   â””â”€â†’ Refresh? â†’ Continue below
   â†“
3. Call /api/cancel_booking/
   â†“
4. Backend: force_expire_booking()
   â”œâ”€â†’ Update DB: status = EXPIRED
   â”œâ”€â†’ Clear Redis: seat_lock:*
   â”œâ”€â†’ Clear Redis: seat_reservation_*
   â””â”€â†’ Clear Redis: reserved_seats_*
   â†“
5. Frontend: Show error page
   â””â”€â†’ &quot;Booking expired. Start new booking?&quot;
</code></pre>
<hr />
<h2 id="system-health-dashboard">ğŸ“Š System Health Dashboard</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           COMPONENT STATUS                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Django           Running on :8000        â”‚
â”‚ âœ… Redis            Running on :6379        â”‚
â”‚ âœ… Celery Worker    3 tasks completed       â”‚
â”‚ âœ… Celery Beat      Running every 60s       â”‚
â”‚ âœ… Database         28 bookings today       â”‚
â”‚ âœ… Razorpay         Test mode active        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         REDIS KEY STATISTICS                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Seat Locks:              12 keys            â”‚
â”‚ User Reservations:       4 keys             â”‚
â”‚ Reserved Seats Lists:    3 keys             â”‚
â”‚ Total Memory Used:       2.1 MB             â”‚
â”‚ Keys Expiring Soon:      5 (&lt; 5 min)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CELERY TASK STATISTICS              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tasks Today:             47                 â”‚
â”‚ â”œâ”€ Email Sent:           38 âœ…               â”‚
â”‚ â”œâ”€ Expired Bookings:     7 âœ…                â”‚
â”‚ â””â”€ Failed:               2 âŒ                â”‚
â”‚ Average Task Time:       2.3s               â”‚
â”‚ Queue Length:            0 (empty)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="performance-metrics">ğŸ¯ Performance Metrics</h2>
<pre><code>OPERATION                  | TIME      | COMPONENT
---------------------------|-----------|------------------
Check seat availability    | ~1 ms     | Redis (cache hit)
Lock seats                 | ~5 ms     | Redis
Create booking             | ~50 ms    | Database
Create Razorpay order      | ~200 ms   | Razorpay API
Process payment            | ~2 sec    | Razorpay
Verify signature           | ~10 ms    | Django (HMAC)
Confirm booking            | ~100 ms   | Database + Redis
Queue email task           | ~5 ms     | Redis (Celery)
Send email (async)         | ~2 sec    | Celery (background)

TOTAL USER WAIT TIME: ~2.5 seconds (without email)
USER SEES: &quot;Booking confirmed!&quot; immediately
BACKGROUND: Email sends 5 seconds later
</code></pre>
<hr />
<h2 id="security-layers">ğŸ” Security Layers</h2>
<pre><code>Layer 1: HTTPS
         â””â”€â†’ All data encrypted in transit

Layer 2: CSRF Protection
         â””â”€â†’ Prevent cross-site attacks

Layer 3: Session Management
         â””â”€â†’ Secure user sessions in Redis

Layer 4: Payment Security
         â”œâ”€â†’ No card data stored
         â”œâ”€â†’ Razorpay handles PCI compliance
         â””â”€â†’ Signature verification (HMAC-SHA256)

Layer 5: Rate Limiting (Planned)
         â””â”€â†’ Prevent brute force attacks

Layer 6: Input Validation
         â””â”€â†’ Sanitize all user input
</code></pre>
<hr />
<h2 id="responsive-design">ğŸ“± Responsive Design</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DESKTOP (1920px)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Header]                        â”‚
â”‚                                 â”‚
â”‚ [Movie Details]  [Seat Layout]  â”‚
â”‚                                 â”‚
â”‚ [Theater Info]   [Price Info]   â”‚
â”‚                                 â”‚
â”‚        [Book Now Button]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MOBILE (375px)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Header]    â”‚
â”‚              â”‚
â”‚ [Movie Info] â”‚
â”‚              â”‚
â”‚ [Seat Layout]â”‚
â”‚  (scrollable)â”‚
â”‚              â”‚
â”‚ [Price Info] â”‚
â”‚              â”‚
â”‚ [Book Button]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="learning-roadmap">ğŸ“ Learning Roadmap</h2>
<pre><code>Week 1: Basics
â”œâ”€ Day 1-2: Django fundamentals
â”œâ”€ Day 3-4: Redis basics
â””â”€ Day 5-7: Celery introduction

Week 2: Integration
â”œâ”€ Day 1-2: Redis + Django
â”œâ”€ Day 3-4: Celery + Django
â””â”€ Day 5-7: Razorpay integration

Week 3: Advanced
â”œâ”€ Day 1-2: Concurrency &amp; locking
â”œâ”€ Day 3-4: Error handling
â””â”€ Day 5-7: Testing &amp; debugging

Week 4: Production
â”œâ”€ Day 1-2: Deployment setup
â”œâ”€ Day 3-4: Monitoring &amp; logging
â””â”€ Day 5-7: Performance optimization
</code></pre>
<hr />
<h2 id="next-steps">ğŸš€ Next Steps</h2>
<ol>
<li><strong>Read</strong>: Start with <a href="./UNDERSTANDING_REDIS.md">UNDERSTANDING_REDIS.md</a></li>
<li><strong>Practice</strong>: Run test scripts and watch the logs</li>
<li><strong>Experiment</strong>: Try different scenarios (refresh, cancel, etc.)</li>
<li><strong>Build</strong>: Create your own features on top of this system</li>
</ol>
<hr />
<p><strong>Remember</strong>: This visual guide is a quick reference. For detailed explanations, see the full documentation! ğŸ“š</p>
<p><em>Last Updated: January 3, 2026</em></p>
        </div>
        
        <hr class="no-print">
        <div class="meta no-print" style="margin-top: 30px;">
            <p style="color: #666; font-size: 0.9em;">
                ğŸ’¡ <strong>Tip:</strong> Use <kbd>Ctrl+P</kbd> (Windows/Linux) or <kbd>Cmd+P</kbd> (Mac) to print or save as PDF.
                Select "Save as PDF" as your destination.
            </p>
        </div>
    </div>
    
    <script>
        // Download markdown function
        function downloadMarkdown() {
            const markdownContent = `# ğŸ¯ Quick Visual Guide - Movie Booking System\n\nA visual reference guide for understanding the system at a glance.\n\n---\n\n## ğŸ—ï¸ System Components\n\n\`\`\`\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    ğŸŒ USER'S BROWSER                    â”‚\nâ”‚  â€¢ Select seats                                         â”‚\nâ”‚  â€¢ Make payment                                         â”‚\nâ”‚  â€¢ See confirmation                                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                     â”‚ HTTP Requests\n                     â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚               ğŸ¯ DJANGO WEB SERVER                      â”‚\nâ”‚  â€¢ Handle requests                                      â”‚\nâ”‚  â€¢ Business logic                                       â”‚\nâ”‚  â€¢ Coordinate components                                â”‚\nâ””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n   â”‚              â”‚              â”‚\n   â–¼              â–¼              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ğŸ—„ï¸ REDIS   â”‚ â”‚ ğŸ’¾ DATABASEâ”‚ â”‚ ğŸ’³ RAZORPAY  â”‚\nâ”‚ Temp cache â”‚ â”‚ Permanent  â”‚ â”‚ Payments     â”‚\nâ”‚ 10 min TTL â”‚ â”‚ storage    â”‚ â”‚ gateway      â”‚\nâ””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n      â”‚\n      â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      âš™ï¸ CELERY WORKERS         â”‚\nâ”‚  â€¢ Send emails                 â”‚\nâ”‚  â€¢ Background tasks            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                 â”‚\n                 â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      â° CELERY BEAT             â”‚\nâ”‚  â€¢ Expire bookings (60s)       â”‚\nâ”‚  â€¢ Send reminders (daily)      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\`\`\`\n\n---\n\n## ğŸ“Š Booking State Transitions\n\n\`\`\`\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Select Seats    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  START   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ PENDING  â”‚\nâ”‚          â”‚                     â”‚ (10 min) â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜\n                                      â”‚\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚                 â”‚                 â”‚\n              User Completes    User Abandons    Timer Expires\n                Payment           Payment         or Refresh\n                    â”‚                 â”‚                 â”‚\n                    â–¼                 â–¼                 â–¼\n              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n              â”‚ CONFIRMED â”‚     â”‚ CANCELLEDâ”‚    â”‚ EXPIRED  â”‚\n              â”‚ (Permanent)â”‚     â”‚          â”‚    â”‚          â”‚\n              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\`\`\`\n\n---\n\n## ğŸ”„ Complete Booking Flow\n\n\`\`\`\n1ï¸âƒ£ USER SELECTS SEATS\n    â†“\n2ï¸âƒ£ DJANGO â†’ REDIS (Lock seats, 10-min TTL)\n    â†“\n3ï¸âƒ£ DJANGO â†’ DATABASE (Create PENDING booking)\n    â†“\n4ï¸âƒ£ USER SEES PAYMENT PAGE\n    â†“\n5ï¸âƒ£ DJANGO â†’ RAZORPAY (Create order)\n    â†“\n6ï¸âƒ£ RAZORPAY MODAL OPENS\n    â†“\n7ï¸âƒ£ USER ENTERS CARD & PAYS\n    â†“\n8ï¸âƒ£ RAZORPAY PROCESSES PAYMENT\n    â†“\n9ï¸âƒ£ DJANGO VERIFIES SIGNATURE âœ…\n    â†“\nğŸ”Ÿ DJANGO â†’ DATABASE (Update to CONFIRMED)\n    â†“\n1ï¸âƒ£1ï¸âƒ£ DJANGO â†’ REDIS (Clear locks)\n    â†“\n1ï¸âƒ£2ï¸âƒ£ DJANGO â†’ CELERY (Queue email)\n    â†“\n1ï¸âƒ£3ï¸âƒ£ CELERY SENDS EMAIL\n    â†“\n1ï¸âƒ£4ï¸âƒ£ USER SEES SUCCESS PAGE! ğŸ‰\n\`\`\`\n\n---\n\n## â° Timeline Visualization\n\n\`\`\`\nTime    | User Action           | System Response\n--------|-----------------------|------------------------------------\n6:00 PM | Select seats A1, A2   | Redis: Lock A1, A2 (expires 6:10)\n        |                       | DB: Create booking (PENDING)\n--------|-----------------------|------------------------------------\n6:02 PM | Click "Pay Now"       | Razorpay: Create order\n        |                       | Show payment modal\n--------|-----------------------|------------------------------------\n6:05 PM | Enter card, pay       | Razorpay: Process payment\n        |                       | Django: Verify signature âœ…\n        |                       | DB: Update to CONFIRMED\n        |                       | Redis: Clear locks\n        |                       | Celery: Queue email\n--------|-----------------------|------------------------------------\n6:05 PM | See success page      | User happy! âœ…\n--------|-----------------------|------------------------------------\n6:07 PM | -                     | Celery: Send email âœ…\n--------|-----------------------|------------------------------------\n\nALTERNATIVE TIMELINE (User Abandons):\n\nTime    | User Action           | System Response\n--------|-----------------------|------------------------------------\n6:00 PM | Select seats          | Redis: Lock seats (expires 6:10)\n        |                       | DB: Create booking (PENDING)\n--------|-----------------------|------------------------------------\n6:05 PM | Close browser âŒ       | (No action)\n--------|-----------------------|------------------------------------\n6:10 PM | -                     | Redis: Auto-delete locks (TTL=0)\n--------|-----------------------|------------------------------------\n6:11 PM | -                     | Celery Beat: Find expired booking\n        |                       | DB: Update to EXPIRED\n        |                       | Redis: Cleanup (if any remaining)\n--------|-----------------------|------------------------------------\nResult  | Seats A1, A2 now available for others! âœ…\n\`\`\`\n\n---\n\n## ğŸ—„ï¸ Redis Keys Structure\n\n\`\`\`\nFor Showtime ID: 24, User ID: 7, Seats: A1, A2\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Key: seat_lock:24:A1                           â”‚\nâ”‚ Value: "7" (user_id)                           â”‚\nâ”‚ TTL: 600 seconds (10 minutes)                  â”‚\nâ”‚ Purpose: Lock individual seat A1               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Key: seat_lock:24:A2                           â”‚\nâ”‚ Value: "7" (user_id)                           â”‚\nâ”‚ TTL: 600 seconds                               â”‚\nâ”‚ Purpose: Lock individual seat A2               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Key: reserved_seats_24                         â”‚\nâ”‚ Value: ["A1", "A2"]                            â”‚\nâ”‚ TTL: 600 seconds                               â”‚\nâ”‚ Purpose: List of all reserved seats            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Key: seat_reservation_24_7                     â”‚\nâ”‚ Value: {                                       â”‚\nâ”‚   "seat_ids": ["A1", "A2"],                    â”‚\nâ”‚   "reserved_at": 1767451157.5                  â”‚\nâ”‚ }                                              â”‚\nâ”‚ TTL: 600 seconds                               â”‚\nâ”‚ Purpose: User's specific reservation           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\`\`\`\n\n---\n\n## ğŸ’¡ Decision Tree: What Component to Use?\n\n\`\`\`\nNeed to...\n\nâ”œâ”€ Store data temporarily (< 1 hour)?\nâ”‚  â””â”€â†’ USE: Redis âœ…\nâ”‚      Examples: Seat locks, session data\nâ”‚\nâ”œâ”€ Store data permanently?\nâ”‚  â””â”€â†’ USE: Database âœ…\nâ”‚      Examples: Users, bookings, movies\nâ”‚\nâ”œâ”€ Process payment?\nâ”‚  â””â”€â†’ USE: Razorpay âœ…\nâ”‚      Example: Credit card payments\nâ”‚\nâ”œâ”€ Send email/SMS?\nâ”‚  â””â”€â†’ USE: Celery (async) âœ…\nâ”‚      Why: Don't make user wait\nâ”‚\nâ”œâ”€ Run task on schedule?\nâ”‚  â””â”€â†’ USE: Celery Beat âœ…\nâ”‚      Example: Expire bookings every 60s\nâ”‚\nâ””â”€ Handle user request?\n   â””â”€â†’ USE: Django âœ…\n       Example: All HTTP requests\n\`\`\`\n\n---\n\n## ğŸš¨ Error Handling Flow\n\n\`\`\`\nSCENARIO: User Refreshes Payment Page\n\n1. Frontend JS detects refresh\n   â†“\n2. sessionStorage check\n   â”œâ”€â†’ New tab? â†’ Show error page âœ…\n   â””â”€â†’ Refresh? â†’ Continue below\n   â†“\n3. Call /api/cancel_booking/\n   â†“\n4. Backend: force_expire_booking()\n   â”œâ”€â†’ Update DB: status = EXPIRED\n   â”œâ”€â†’ Clear Redis: seat_lock:*\n   â”œâ”€â†’ Clear Redis: seat_reservation_*\n   â””â”€â†’ Clear Redis: reserved_seats_*\n   â†“\n5. Frontend: Show error page\n   â””â”€â†’ "Booking expired. Start new booking?"\n\`\`\`\n\n---\n\n## ğŸ“Š System Health Dashboard\n\n\`\`\`\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚           COMPONENT STATUS                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ âœ… Django           Running on :8000        â”‚\nâ”‚ âœ… Redis            Running on :6379        â”‚\nâ”‚ âœ… Celery Worker    3 tasks completed       â”‚\nâ”‚ âœ… Celery Beat      Running every 60s       â”‚\nâ”‚ âœ… Database         28 bookings today       â”‚\nâ”‚ âœ… Razorpay         Test mode active        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         REDIS KEY STATISTICS                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Seat Locks:              12 keys            â”‚\nâ”‚ User Reservations:       4 keys             â”‚\nâ”‚ Reserved Seats Lists:    3 keys             â”‚\nâ”‚ Total Memory Used:       2.1 MB             â”‚\nâ”‚ Keys Expiring Soon:      5 (< 5 min)        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         CELERY TASK STATISTICS              â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Tasks Today:             47                 â”‚\nâ”‚ â”œâ”€ Email Sent:           38 âœ…               â”‚\nâ”‚ â”œâ”€ Expired Bookings:     7 âœ…                â”‚\nâ”‚ â””â”€ Failed:               2 âŒ                â”‚\nâ”‚ Average Task Time:       2.3s               â”‚\nâ”‚ Queue Length:            0 (empty)          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\`\`\`\n\n---\n\n## ğŸ¯ Performance Metrics\n\n\`\`\`\nOPERATION                  | TIME      | COMPONENT\n---------------------------|-----------|------------------\nCheck seat availability    | ~1 ms     | Redis (cache hit)\nLock seats                 | ~5 ms     | Redis\nCreate booking             | ~50 ms    | Database\nCreate Razorpay order      | ~200 ms   | Razorpay API\nProcess payment            | ~2 sec    | Razorpay\nVerify signature           | ~10 ms    | Django (HMAC)\nConfirm booking            | ~100 ms   | Database + Redis\nQueue email task           | ~5 ms     | Redis (Celery)\nSend email (async)         | ~2 sec    | Celery (background)\n\nTOTAL USER WAIT TIME: ~2.5 seconds (without email)\nUSER SEES: "Booking confirmed!" immediately\nBACKGROUND: Email sends 5 seconds later\n\`\`\`\n\n---\n\n## ğŸ” Security Layers\n\n\`\`\`\nLayer 1: HTTPS\n         â””â”€â†’ All data encrypted in transit\n\nLayer 2: CSRF Protection\n         â””â”€â†’ Prevent cross-site attacks\n\nLayer 3: Session Management\n         â””â”€â†’ Secure user sessions in Redis\n\nLayer 4: Payment Security\n         â”œâ”€â†’ No card data stored\n         â”œâ”€â†’ Razorpay handles PCI compliance\n         â””â”€â†’ Signature verification (HMAC-SHA256)\n\nLayer 5: Rate Limiting (Planned)\n         â””â”€â†’ Prevent brute force attacks\n\nLayer 6: Input Validation\n         â””â”€â†’ Sanitize all user input\n\`\`\`\n\n---\n\n## ğŸ“± Responsive Design\n\n\`\`\`\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         DESKTOP (1920px)        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ [Header]                        â”‚\nâ”‚                                 â”‚\nâ”‚ [Movie Details]  [Seat Layout]  â”‚\nâ”‚                                 â”‚\nâ”‚ [Theater Info]   [Price Info]   â”‚\nâ”‚                                 â”‚\nâ”‚        [Book Now Button]        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ MOBILE (375px)â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  [Header]    â”‚\nâ”‚              â”‚\nâ”‚ [Movie Info] â”‚\nâ”‚              â”‚\nâ”‚ [Seat Layout]â”‚\nâ”‚  (scrollable)â”‚\nâ”‚              â”‚\nâ”‚ [Price Info] â”‚\nâ”‚              â”‚\nâ”‚ [Book Button]â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\`\`\`\n\n---\n\n## ğŸ“ Learning Roadmap\n\n\`\`\`\nWeek 1: Basics\nâ”œâ”€ Day 1-2: Django fundamentals\nâ”œâ”€ Day 3-4: Redis basics\nâ””â”€ Day 5-7: Celery introduction\n\nWeek 2: Integration\nâ”œâ”€ Day 1-2: Redis + Django\nâ”œâ”€ Day 3-4: Celery + Django\nâ””â”€ Day 5-7: Razorpay integration\n\nWeek 3: Advanced\nâ”œâ”€ Day 1-2: Concurrency & locking\nâ”œâ”€ Day 3-4: Error handling\nâ””â”€ Day 5-7: Testing & debugging\n\nWeek 4: Production\nâ”œâ”€ Day 1-2: Deployment setup\nâ”œâ”€ Day 3-4: Monitoring & logging\nâ””â”€ Day 5-7: Performance optimization\n\`\`\`\n\n---\n\n## ğŸš€ Next Steps\n\n1. **Read**: Start with [UNDERSTANDING_REDIS.md](./UNDERSTANDING_REDIS.md)\n2. **Practice**: Run test scripts and watch the logs\n3. **Experiment**: Try different scenarios (refresh, cancel, etc.)\n4. **Build**: Create your own features on top of this system\n\n---\n\n**Remember**: This visual guide is a quick reference. For detailed explanations, see the full documentation! ğŸ“š\n\n*Last Updated: January 3, 2026*\n`;
            const blob = new Blob([markdownContent], { type: 'text/markdown' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'QUICK_VISUAL_GUIDE.md';
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }
        
        // Keyboard shortcut for print
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });
    </script>
</body>
</html>
